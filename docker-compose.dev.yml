# =============================================================================
# STANDALONE AI ENGINE DEV OVERLAY - Hot-reload and reduced resources
# =============================================================================
# Usage: docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d
#
# NOTE: This is for standalone AI Engine development only (running the AI
# service independently for testing/iteration). When running the full
# Solvix platform, the AI Engine is managed by Solvix/docker-compose.yml.
#
# Changes from base:
# - Mounts src/ for hot-reload with uvicorn --reload
# - Enables debug mode
# - Reduces resource limits
# =============================================================================

services:
  ai-engine:
    command: ["uvicorn", "src.main:app", "--host", "0.0.0.0", "--port", "8001", "--reload"]
    volumes:
      - ./src:/app/src
    environment:
      - LOG_LEVEL=DEBUG
      - DEBUG=true
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M
        reservations:
          cpus: '0.1'
          memory: 128M
